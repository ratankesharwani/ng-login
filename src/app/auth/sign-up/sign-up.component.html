<div class="container vh-100 d-flex justify-content-center align-items-center bg-dark">

  <!-- Alert on top -->
  <div class="position-absolute top-0 w-100 px-3 mt-3" style="z-index: 1050;">
    <app-alert [message]="alertMsg" [type]="alertType"></app-alert>
  </div>

  <div class="card shadow p-4 w-100" style="max-width: 400px; background-color: #2c2c2c;">
    <h4 class="text-center text-white mb-4">Sign Up</h4>

    <form [formGroup]="signupForm" (ngSubmit)="onSignup()">

      <div class="mb-3">
        <label class="form-label text-white">Username</label>
        <input type="text" class="form-control" formControlName="username" placeholder="Type Username"
          [ngClass]="{ 'is-invalid': signupForm.get('username')?.touched && signupForm.get('username')?.invalid }" />
        <div class="invalid-feedback">Username is required.</div>
      </div>

      <div class="mb-3">
        <label class="form-label text-white">Role</label>
        <select class="form-select" formControlName="role"
          [ngClass]="{ 'is-invalid': signupForm.get('role')?.touched && signupForm.get('role')?.invalid }">
          <option value="admin" selected>Admin</option>
          <option value="user">User</option>
          <option value="temporary">Temporary</option>
        </select>
        <div class="invalid-feedback">Please select a valid role.</div>
      </div>



      <div class="mb-3 position-relative">
        <label class="form-label text-white">Password</label>
        <div class="input-group">
          <input [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="password" placeholder="Type Password"
            [ngClass]="{ 'is-invalid': signupForm.get('password')?.touched && signupForm.get('password')?.invalid }" />
          <span class="input-group-text bg-white" (click)="showPassword = !showPassword" style="cursor: pointer;">
            <i class="{{ showPassword ? 'fa fa-eye-slash' : 'fa fa-eye' }}"></i>
          </span>
          <div class="invalid-feedback d-block"
            *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.invalid">
            Password must be at least 6 characters.
          </div>
        </div>
      </div>



      <div class="mb-3 position-relative">
        <label class="form-label text-white">Confirm Password</label>
        <div class="input-group">
          <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control"
            formControlName="confirmPassword" placeholder="Confirm Password"
            [ngClass]="{ 'is-invalid': signupForm.get('confirmPassword')?.touched && signupForm.get('confirmPassword')?.invalid }" />
          <span class="input-group-text bg-white" (click)="showConfirmPassword = !showConfirmPassword"
            style="cursor: pointer;">
            <i class="{{ showConfirmPassword ? 'fa fa-eye-slash' : 'fa fa-eye' }}"></i>
          </span>
          <div class="invalid-feedback d-block"
            *ngIf="signupForm.get('confirmPassword')?.touched && signupForm.get('confirmPassword')?.invalid">
            Please confirm your password.
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-success w-100" [disabled]="signupForm.invalid">
        Sign Up
      </button>

      <div class="text-center mt-4">
        <a (click)="goToLogin()" class="btn btn-outline-light w-100">
          Already have an account? Sign in
        </a>
      </div>

    </form>
  </div>
</div>